<?php

ini_set('display_errors', TRUE);
error_reporting(E_ALL);

////////////////////////////////////////////////////////////////////////////////
// start a web session. ////////////////////////////////////////////////////////

if(!session_id())
session_start();

////////////////////////////////////////////////////////////////////////////////
// boot the autoloader. ////////////////////////////////////////////////////////

$ProjectRoot = match(TRUE) {
	isset($_SERVER['DOCUMENT_ROOT']),
	=> dirname($_SERVER['DOCUMENT_ROOT'], 1),

	isset($_SERVER['SCRIPT_FILENAME'])
	=> dirname($_SERVER['SCRIPT_FILENAME'], 2),

	default
	=> dirname(__FILE__, 2)
};

require(sprintf(
	'%s/vendor/autoload.php',
	$ProjectRoot
));

////////////////////////////////////////////////////////////////////////////////
// spool up atlantis engine ////////////////////////////////////////////////////

define('Atlantis', new Nether\Atlantis\Engine($ProjectRoot));
Atlantis->Run();
